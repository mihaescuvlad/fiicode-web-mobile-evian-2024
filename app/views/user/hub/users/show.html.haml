.container.mx-auto.p-4.max-w-2xl.flex.flex-col.gap-6
  .bg-white.rounded-lg.w-full.p-8.space-y-4
    %div
      %h2.text-lg.text-slate-600
        = "@#{@user.login.username}"
      - if @user.full_name.present? then
        %h1.text-xl
          = @user.full_name
      - if @user.country.present?
        %span
          = @user.country + if @user.city.present? then ", #{@user.city}" else "" end
      - if @user.bio.present? then
        %p
        = @user.bio
    .flex.justify-evenly
      .flex.flex-col.align-center
        %span.text-center.text-lg
          = @user.followers.length
        %span.text-sm
          Followers
      .flex.flex-col.align-center
        %span.text-center.text-lg
          = @user.following.length
        %span.text-sm
          Following

    - if current_user == @user
      %button.follow-btn.bg-slate-600.rounded-lg.w-full.text-white.py-1{href: user_user_profile_path}
        Update profile
    - elsif current_user.following?(@user)
      %button.follow-btn.bg-slate-600.rounded-lg.w-full.text-white.py-1{href: user_hub_user_follow_url(@user)}
        Unfollow
    - else
      %button.follow-btn.bg-primary-400.rounded-lg.w-full.text-white.py-1{href: user_hub_user_follow_url(@user)}
        Follow
  %h1.text-2xl
    = "Posts (#{@user.posts.top_level.length})"
  - @user.posts.top_level.newest_first.each do |post|
    = render '/user/hub/posts/post', post: post

:javascript
  {
    const btn = document.querySelector('.follow-btn')
    btn.addEventListener('click', () => {
      location.replace(btn.getAttribute('href'))
    })
  }