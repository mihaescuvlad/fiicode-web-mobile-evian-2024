.container.mx-auto.px-4.py-8
  .flex.flex-col.justify-center.items-center.w-full
    %h1.text-2xl.font-semibold.mb-6.py-1.text-center.w-full.rounded-2xl.bg-white.bg-clip-border.text-gray-700.shadow-lg 
      - if current_user.present?
        = "Top delicious and healthy foods for you"
      - else
        = "Top rated foods"

    .grid.grid-cols-1.sm:grid-cols-1.md:grid-cols-2.lg:grid-cols-2.xl:grid-cols-3.gap-8
      - @top_products.each do |product|
        .col-span-1.sm:col-span-2.md:col-span-1.lg:col-span-1.xl:col-span-1
          = product_card(product)

:javascript
  $(document).on('click', '[id^="heart-icon"]', function() {
    const heartId = this.id;
    const productId = this.id.replace('heart-icon-', '');
    if ($("#" + heartId).hasClass('mdi-heart')) {
      $.ajax({
        url: 'products/' + productId + '/remove_from_favorites',
        type: 'PATCH',
        success: function(response) {
          $("#" + heartId).removeClass('mdi-heart').addClass('mdi-heart-outline');
        },
        error: function(response) {
          $("#" + heartId).removeClass('mdi-heart-outline').addClass('mdi-heart');
        }
      });
      return;
    }
    
    $.ajax({
      url: 'products/' + productId + '/add_to_favorites',
      type: 'PATCH',
      success: function(response) {
        $("#" + heartId).removeClass('mdi-heart-outline').addClass('mdi-heart');
      },
      error: function(response) {
        $("#" + heartId).removeClass('mdi-heart').addClass('mdi-heart-outline');
      }
    });
  });
