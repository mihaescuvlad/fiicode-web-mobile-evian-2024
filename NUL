# Logfile created on 2024-02-27 11:35:23 +0200 by logger.rb/v1.5.3
W, [2024-02-27T11:58:05.154605 #71609]  WARN -- : The BSON Symbol type is deprecated by MongoDB. Please use String or StringifiedSymbol field types instead of the Symbol field type.
E, [2024-02-27T11:59:21.117498 #71609] ERROR -- :   
ActionController::RoutingError (No route matches [GET] "/product"):
  
E, [2024-02-27T11:59:34.927129 #71609] ERROR -- :   
NoMethodError (undefined method `map' for nil:NilClass):
  
app/controllers/user/products_controller.rb:13:in `show'
W, [2024-02-27T12:06:40.092467 #71609]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, sconn:75094)
W, [2024-02-27T12:13:46.007742 #73739]  WARN -- : The BSON Symbol type is deprecated by MongoDB. Please use String or StringifiedSymbol field types instead of the Symbol field type.
W, [2024-02-27T12:24:49.684785 #76182]  WARN -- : The BSON Symbol type is deprecated by MongoDB. Please use String or StringifiedSymbol field types instead of the Symbol field type.
W, [2024-02-27T12:28:11.742568 #76182]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, sconn:79100)
E, [2024-02-27T12:33:46.027673 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.094751 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.171664 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.222887 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.274351 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.328106 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.378168 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.428297 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.478549 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.533126 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.593620 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.662386 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.726654 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.780513 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.840226 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.888769 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.938672 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:46.993303 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:33:47.042868 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [POST] "/product/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T12:36:11.592675 #76182] ERROR -- :   
ActionController::RoutingError (No route matches [GET] "/product"):
  
W, [2024-02-27T12:37:26.029075 #78543]  WARN -- : The BSON Symbol type is deprecated by MongoDB. Please use String or StringifiedSymbol field types instead of the Symbol field type.
W, [2024-02-27T13:18:36.118354 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, sconn:82811)
W, [2024-02-27T14:05:35.428459 #78543]  WARN -- : MONGODB | Error running awaited hello on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 20 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T14:05:36.314094 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, sconn:80273)
W, [2024-02-27T14:05:36.891933 #78543]  WARN -- : MONGODB | Error running awaited hello on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 20 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T14:05:37.577315 #78543]  WARN -- : MONGODB | Error running awaited hello on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 20 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017)
W, [2024-02-27T14:05:37.726927 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, sconn:86533)
W, [2024-02-27T14:05:38.764785 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, sconn:78478)
W, [2024-02-27T14:05:46.325163 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:05:47.738185 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:05:48.775893 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:06.332147 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:07.749476 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:08.787189 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:26.343343 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:27.761067 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:28.798585 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:46.354453 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:06:47.772503 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: SocketError: getaddrinfo: Temporary failure in name resolution
W, [2024-02-27T14:17:23.320897 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, sconn:85439)
W, [2024-02-27T14:18:54.266300 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, sconn:86011)
E, [2024-02-27T14:19:22.788452 #78543] ERROR -- :   
ArgumentError (Before process_action callback :verifiy_authenticiy_token has not been defined):
  
app/controllers/user/products_controller.rb:4:in `<class:ProductsController>'
app/controllers/user/products_controller.rb:1:in `<main>'
W, [2024-02-27T14:19:27.944430 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, sconn:90148)
W, [2024-02-27T14:19:35.145105 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, sconn:87250)
W, [2024-02-27T14:21:10.437206 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, sconn:88025)
E, [2024-02-27T14:21:18.020127 #78543] ERROR -- :   
AbstractController::ActionNotFound (The create, action could not be found for the :verify_authenticity_token
callback on User::ProductsController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:62:in `match?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:432:in `block in inverted_lambda'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block (2 levels) in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `all?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.3.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
mongoid (8.1.4) lib/mongoid/railties/controller_runtime.rb:21:in `process_action'
actionpack (7.1.3.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.3.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.3.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.3.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:21:in `block in <class:Constraints>'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:51:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.9.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.9.1) lib/rack/etag.rb:29:in `call'
rack (3.0.9.1) lib/rack/conditional_get.rb:31:in `call'
rack (3.0.9.1) lib/rack/head.rb:15:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.9.1) lib/rack/method_override.rb:28:in `call'
rack (3.0.9.1) lib/rack/runtime.rb:24:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.9.1) lib/rack/sendfile.rb:114:in `call'
railties (7.1.3.2) lib/rails/engine.rb:536:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
W, [2024-02-27T14:21:20.624235 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, sconn:90904)
W, [2024-02-27T14:21:54.718757 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, sconn:88193)
W, [2024-02-27T14:21:55.187971 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, sconn:86160)
E, [2024-02-27T14:22:42.360472 #78543] ERROR -- :   
ActionView::Template::Error (Illegal nesting: nesting within a tag that already has content is illegal.):
    151: 
    152:   $('body').on('submit', '#review-form', function(event) {
    153: //    event.preventDefault();
    154:       let form = $(this);
    155:       let formData = new FormData(form[0]);
    156: //    formData.append('_token', $('meta[name="csrf-token"]').attr('content'));
    157: //
  
app/views/user/products/show.html.haml:154
E, [2024-02-27T14:23:07.638534 #78543] ERROR -- :   
ActionView::Template::Error (Illegal nesting: nesting within a tag that already has content is illegal.):
    151: 
    152:   $('body').on('submit', '#review-form', function(event) {
    153: //    event.preventDefault();
    154:       let form = $(this);
    155:       let formData = new FormData(form[0]);
    156: //    formData.append('_token', $('meta[name="csrf-token"]').attr('content'));
    157: //
  
app/views/user/products/show.html.haml:154
W, [2024-02-27T14:25:17.582756 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, sconn:91052)
W, [2024-02-27T14:25:17.586867 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, sconn:86417)
W, [2024-02-27T14:25:17.587002 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, sconn:88225)
W, [2024-02-27T14:25:17.879617 #78543]  WARN -- : Read retry due to: Mongo::Error::PoolClearedError: Connection to ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017 interrupted due to server monitor timeout (for pool 0x108040) (modern retry, attempt 1)
W, [2024-02-27T14:25:32.475927 #78543]  WARN -- : MONGODB | Error running awaited hello on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 20 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T14:25:38.393940 #78543]  WARN -- : MONGODB | Error running awaited hello on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 20 seconds to receive data (select call timed out) (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017)
W, [2024-02-27T14:25:40.255322 #78543]  WARN -- : MONGODB | Error running awaited hello on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 20 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T14:26:19.676524 #78543]  WARN -- : Can't verify CSRF token authenticity.
E, [2024-02-27T14:26:19.684784 #78543] ERROR -- :   
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.1.3.2) lib/action_controller/metal/request_forgery_protection.rb:293:in `handle_unverified_request'
actionpack (7.1.3.2) lib/action_controller/metal/request_forgery_protection.rb:388:in `handle_unverified_request'
actionpack (7.1.3.2) lib/action_controller/metal/request_forgery_protection.rb:377:in `verify_authenticity_token'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:403:in `block in make_lambda'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:202:in `block (2 levels) in halting'
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:203:in `block in halting'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.3.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
mongoid (8.1.4) lib/mongoid/railties/controller_runtime.rb:21:in `process_action'
actionpack (7.1.3.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.3.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.3.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.3.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:21:in `block in <class:Constraints>'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:51:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.9.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.9.1) lib/rack/etag.rb:29:in `call'
rack (3.0.9.1) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.9.1) lib/rack/head.rb:15:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.9.1) lib/rack/method_override.rb:28:in `call'
rack (3.0.9.1) lib/rack/runtime.rb:24:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.9.1) lib/rack/sendfile.rb:114:in `call'
railties (7.1.3.2) lib/rails/engine.rb:536:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
E, [2024-02-27T14:42:13.105091 #78543] ERROR -- :   
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check .flex.flex-col.justify-center.items-center.h-full.w-full.overflow-auto
  .flex.flex-col.justify-center.items-center.place-self-center.w-full
    %h1.text-3xl.font-semibold.mt-10
      = "#{@product.name}"
    %h1.text-xl.font-semibold.mb-8
      = "(#{@product.brand} - #{@product.weight}g)"

  .flex.flex-row.justify-between.items-start{ class: "md:w-1/4 sm:w-full mb-8" }
    .flex.flex-col{ class: "w-1/2 px-4" }
      %label.mb-4
        = "Number of servings" 
      %input{type: "number", name: "servings", id: "servings", required: true, class: "rounded-lg p-2 w-full border border-slate-700 bg-slate-50", min: "0", value: "1"}
    .flex.flex-col{ class: "w-1/2 px-4" }
      %label#listbox-label
      = "Serving size"
      .relative.mt-4
        %button#weight-units-list-button.relative.w-full.cursor-default.rounded-lg.bg-white.pl-3.pr-10.text-left.text-gray-900.bg-slate-50.shadow-sm.ring-1.ring-inset.ring-slate-700.focus:outline-none.focus:ring-2.focus:ring-indigo-500.sm:text-sm.sm:leading-6{"aria-expanded" => "true", "aria-haspopup" => "listbox", "aria-labelledby" => "listbox-label", class: "py-2", type: "button"}
          %span.flex.items-center
            = @weight_units.find { |unit| unit.match?(/^100\s+\S+/) } # Regex sequence for finding any string starting with 100 + whitespace + characters
          %span.pointer-events-none.absolute.inset-y-0.right-0.ml-3.flex.items-center.pr-2
            = material_icon.shape('arrow_drop_down').md_24
        %ul#weight-units.absolute.z-10.mt-1.max-h-56.w-full.overflow-auto.rounded-lg.bg-slate-50.py-1.text-base.shadow-lg.ring-1.ring-black.ring-opacity-5.focus:outline-none.sm:text-sm{"aria-activedescendant" => "listbox-option-3", "aria-labelledby" => "listbox-label", role: "listbox", tabindex: "-1", style: "display: none;"}
          - @weight_units.each_with_index do |unit, index|
            %li{ id: "listbox-option-#{index}", class: "text-gray-900 relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-gray-200", role: "option" }
              .flex.items-center
                %span.font-normal.ml-3.block.truncate= unit

  %table.table-auto.border.border-slate-300{ class: "md:w-1/3 sm:w-full" }
    %tbody
      - @product.attributes.except('_id', 'brand', 'name', 'weight', 'weight_units', 'approved', 'created_at', 'updated_at').each_with_index do |(attribute, value), row_index|
        - humanized_attribute = attribute.humanize.split.map(&:capitalize).join(' ')
        - product_row_class = row_index.even? ? "bg-slate-50" : "bg-slate-100"
        %tr{ class: product_row_class}
          - if attribute == "allergens"
            %td{ class: "border border-slate-300 p-2 font-semibold w-1/3"}
              = "Allergens"
            %td{ class: "border border-slate-300 p-2 text-slate-700 w-2/3"}
              - allergen_names = value.map { |allergen_id| Allergen.find(allergen_id).name }
              = allergen_names.join(', ')
              %br/
          - elsif attribute == "submitted_by"
            %td{ class: "border border-slate-300 p-2 font-semibold"}
              = "Submitted by"
            %td{ class: "border border-slate-300 p-2 text-slate-700"}
              - user = User.find(value)
              = user.first_name
              %br/
          - else
            %td{ class: "border border-slate-300 p-2 font-semibold"}= humanized_attribute
            %td{ class: "border border-slate-300 p-2 text-slate-700"}= value.present? ? value : "0"

  .flex.flex-col.justify-start.items-start{ class: "md:w-1/3 sm:w-full h-full mt-10" }
    %h1.text-2xl.font-semibold.mb-4
      = "Reviews"

    %form#review-form{ action: "/products/#{@product.id}/reviews", method: 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
      = csrf_meta_tags 
      %label.mb-2
        = "Write a review for #{@product.name}"
      %textarea#review-text.bg-slate-50{ class: "w-full h-2/3 mb-2 rounded-lg", style: "resize: none;", name: "review[comment]" }
        - @reviews.find_by(reviewer_id: current_user.id) do |current_user_review|
        = @current_user_review?.comment
      .flex.flex-row.items-center.justify-between.w-full.mt-4
        %label
          = "Do you recommend this product?"
        .flex#thumbs-buttons.flex-row.items-center.justify-start{ class: "w-1/2" }
          %button#thumbs-up-btn.mr-4.border-teal-700.rounded-lg{ class: @current_user_review.rating == true ? "border" : "", type: "button", onclick: "setRating(true)" }
            %span.p-1{ style: "color: 266aff; opacity: 0.85;" }
              = material_icon.shape('thumb_up').md_36
          %button#thumbs-down-btn.border-rose-500.rounded-lg{ class: @current_user_review.rating == false ? "border" : "", type: "button", onclick: "setRating(false)" }
            %span.p-1{ style: "color: ff2626; opacity: 0.85;" }
              = material_icon.shape('thumb_down').md_36
        %button{ type: "submit", class: "bg-primary-500 text-white rounded-lg p-2 px-4" }
          = "Submit"

    .flex.flex-col.items-start.w-full
      - if @reviews.present?
        - @reviews.each do |review|
          - next if review.comment.blank?
          - reviewer = User.find_by(id: review.reviewer_id)&.first_name
          .flex.flex-col.items-start.shadow-xl.rounded-lg.p-4.border-2.bg-slate-100.w-full{ class: "mb-4" }
            .flex.flex-row.justify-start.content-center.rounded-lg.p-2.border-2.mb-3.bg-gray-200{ class: "w-full" }
              - if review.rating
                %span.flex.items-center.mr-4{ style: "color: 266aff; opacity: 0.85;" }
                  = material_icon.shape('thumb_up').md_36
                %p.text-slate-800.text-lg.font-medium.mt-1
                  = "Recommended by #{reviewer}"
              - else
                %span.flex.items-center.mr-4{ style: "color: ff2626; opacity: 0.85;"}
                  = material_icon.shape('thumb_down').md_36
                %p.text-slate-800.text-lg.font-medium.mt-1
                  = "Not Recommended by #{reviewer}"
            %div.mb-4
              %p
                = review.comment
      - else
        %p No reviews available. You can help by adding a review.

:javascript
  document.addEventListener("DOMContentLoaded", function() {
      var listItems = document.querySelectorAll('#weight-units li');
      var button = document.querySelector("#weight-units-list-button > span")
      var weightUnitsList = document.getElementById('weight-units');

      function updateServingSize(element) {
          var buttonText = element.innerText.trim();
          button.innerText = buttonText;
          weightUnitsList.style.display = 'none';
      }

      button.addEventListener('click', function() {
          if (weightUnitsList.style.display === 'none' || weightUnitsList.style.display === '') {
              weightUnitsList.style.display = 'block';
          } else {
              weightUnitsList.style.display = 'none';
          }
      });

      listItems.forEach(function(item) {
          item.addEventListener('click', function() {
              updateServingSize(this);
          });
      });

      document.body.addEventListener('click', function(event) {
          if (!event.target.closest('#weight-units-list-button') && !event.target.closest('#weight-units')) {
              weightUnitsList.style.display = 'none';
          }
      });
  });

  function setRating(isThumbsUp) {
    const thumbsUpBtn = document.getElementById('thumbs-up-btn');
    const thumbsDownBtn = document.getElementById('thumbs-down-btn');

    thumbsUpBtn.classList.toggle('border', isThumbsUp);
    thumbsDownBtn.classList.toggle('border', !isThumbsUp);

    const ratingInput = document.createElement('input');
    ratingInput.type = 'hidden';
    ratingInput.name = 'review[rating]';
    ratingInput.value = isThumbsUp ? 'true' : 'false';

    const form = document.getElementById('review-form');
    const existingRatingInput = form.querySelector('input[name="review[rating]"]');
    if (existingRatingInput) {
      existingRatingInput.remove();
    }

    form.appendChild(ratingInput);
  }

  $('body').on('submit', '#review-form', function(event) {
    event.preventDefault();
    let form = $(this);
    let formData = new FormData(form[0]);
    formData.append('_token', $('meta[name="csrf-token"]').attr('content'));

    $.ajax({
      url: form.attr('action'),
      method: 'POST',
      data: formData,
      contentType: false,
      processData: false,
      success: function(response) {
        $('meta[name="csrf-token"]').attr('content', response.token);

        $('#review-text').val('');
        location.reload();
      },
      error: function(xhr, status, error) {
        console.log(error);
      }
    });
  });

):
1:    .flex.flex-col.justify-center.items-center.h-full.w-full.overflow-auto
2:      .flex.flex-col.justify-center.items-center.place-self-center.w-full
3:        %h1.text-3xl.font-semibold.mt-10
4:          = "#{@product.name}"
5:        %h1.text-xl.font-semibold.mb-8
6:          = "(#{@product.brand} - #{@product.weight}g)"
7:    
8:      .flex.flex-row.justify-between.items-start{ class: "md:w-1/4 sm:w-full mb-8" }
9:        .flex.flex-col{ class: "w-1/2 px-4" }
10:          %label.mb-4
11:            = "Number of servings" 
12:          %input{type: "number", name: "servings", id: "servings", required: true, class: "rounded-lg p-2 w-full border border-slate-700 bg-slate-50", min: "0", value: "1"}
13:        .flex.flex-col{ class: "w-1/2 px-4" }
14:          %label#listbox-label
15:          = "Serving size"
16:          .relative.mt-4
17:            %button#weight-units-list-button.relative.w-full.cursor-default.rounded-lg.bg-white.pl-3.pr-10.text-left.text-gray-900.bg-slate-50.shadow-sm.ring-1.ring-inset.ring-slate-700.focus:outline-none.focus:ring-2.focus:ring-indigo-500.sm:text-sm.sm:leading-6{"aria-expanded" => "true", "aria-haspopup" => "listbox", "aria-labelledby" => "listbox-label", class: "py-2", type: "button"}
18:              %span.flex.items-center
19:                = @weight_units.find { |unit| unit.match?(/^100\s+\S+/) } # Regex sequence for finding any string starting with 100 + whitespace + characters
20:              %span.pointer-events-none.absolute.inset-y-0.right-0.ml-3.flex.items-center.pr-2
21:                = material_icon.shape('arrow_drop_down').md_24
22:            %ul#weight-units.absolute.z-10.mt-1.max-h-56.w-full.overflow-auto.rounded-lg.bg-slate-50.py-1.text-base.shadow-lg.ring-1.ring-black.ring-opacity-5.focus:outline-none.sm:text-sm{"aria-activedescendant" => "listbox-option-3", "aria-labelledby" => "listbox-label", role: "listbox", tabindex: "-1", style: "display: none;"}
23:              - @weight_units.each_with_index do |unit, index|
24:                %li{ id: "listbox-option-#{index}", class: "text-gray-900 relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-gray-200", role: "option" }
25:                  .flex.items-center
26:                    %span.font-normal.ml-3.block.truncate= unit
27:    
28:      %table.table-auto.border.border-slate-300{ class: "md:w-1/3 sm:w-full" }
29:        %tbody
30:          - @product.attributes.except('_id', 'brand', 'name', 'weight', 'weight_units', 'approved', 'created_at', 'updated_at').each_with_index do |(attribute, value), row_index|
31:            - humanized_attribute = attribute.humanize.split.map(&:capitalize).join(' ')
32:            - product_row_class = row_index.even? ? "bg-slate-50" : "bg-slate-100"
33:            %tr{ class: product_row_class}
34:              - if attribute == "allergens"
35:                %td{ class: "border border-slate-300 p-2 font-semibold w-1/3"}
36:                  = "Allergens"
37:                %td{ class: "border border-slate-300 p-2 text-slate-700 w-2/3"}
38:                  - allergen_names = value.map { |allergen_id| Allergen.find(allergen_id).name }
39:                  = allergen_names.join(', ')
40:                  %br/
41:              - elsif attribute == "submitted_by"
42:                %td{ class: "border border-slate-300 p-2 font-semibold"}
43:                  = "Submitted by"
44:                %td{ class: "border border-slate-300 p-2 text-slate-700"}
45:                  - user = User.find(value)
46:                  = user.first_name
47:                  %br/
48:              - else
49:                %td{ class: "border border-slate-300 p-2 font-semibold"}= humanized_attribute
50:                %td{ class: "border border-slate-300 p-2 text-slate-700"}= value.present? ? value : "0"
51:    
52:      .flex.flex-col.justify-start.items-start{ class: "md:w-1/3 sm:w-full h-full mt-10" }
53:        %h1.text-2xl.font-semibold.mb-4
54:          = "Reviews"
55:    
56:        %form#review-form{ action: "/products/#{@product.id}/reviews", method: 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
57:          = csrf_meta_tags 
58:          %label.mb-2
59:            = "Write a review for #{@product.name}"
60:          %textarea#review-text.bg-slate-50{ class: "w-full h-2/3 mb-2 rounded-lg", style: "resize: none;", name: "review[comment]" }
61:            - @reviews.find_by(reviewer_id: current_user.id) do |current_user_review|
62:            = @current_user_review?.comment
63:          .flex.flex-row.items-center.justify-between.w-full.mt-4
64:            %label
65:              = "Do you recommend this product?"
66:            .flex#thumbs-buttons.flex-row.items-center.justify-start{ class: "w-1/2" }
67:              %button#thumbs-up-btn.mr-4.border-teal-700.rounded-lg{ class: @current_user_review.rating == true ? "border" : "", type: "button", onclick: "setRating(true)" }
68:                %span.p-1{ style: "color: 266aff; opacity: 0.85;" }
69:                  = material_icon.shape('thumb_up').md_36
70:              %button#thumbs-down-btn.border-rose-500.rounded-lg{ class: @current_user_review.rating == false ? "border" : "", type: "button", onclick: "setRating(false)" }
71:                %span.p-1{ style: "color: ff2626; opacity: 0.85;" }
72:                  = material_icon.shape('thumb_down').md_36
73:            %button{ type: "submit", class: "bg-primary-500 text-white rounded-lg p-2 px-4" }
74:              = "Submit"
75:    
76:        .flex.flex-col.items-start.w-full
77:          - if @reviews.present?
78:            - @reviews.each do |review|
79:              - next if review.comment.blank?
80:              - reviewer = User.find_by(id: review.reviewer_id)&.first_name
81:              .flex.flex-col.items-start.shadow-xl.rounded-lg.p-4.border-2.bg-slate-100.w-full{ class: "mb-4" }
82:                .flex.flex-row.justify-start.content-center.rounded-lg.p-2.border-2.mb-3.bg-gray-200{ class: "w-full" }
83:                  - if review.rating
84:                    %span.flex.items-center.mr-4{ style: "color: 266aff; opacity: 0.85;" }
85:                      = material_icon.shape('thumb_up').md_36
86:                    %p.text-slate-800.text-lg.font-medium.mt-1
87:                      = "Recommended by #{reviewer}"
88:                  - else
89:                    %span.flex.items-center.mr-4{ style: "color: ff2626; opacity: 0.85;"}
90:                      = material_icon.shape('thumb_down').md_36
91:                    %p.text-slate-800.text-lg.font-medium.mt-1
92:                      = "Not Recommended by #{reviewer}"
93:                %div.mb-4
94:                  %p
95:                    = review.comment
96:          - else
97:            %p No reviews available. You can help by adding a review.
98:    
99:    :javascript
100:      document.addEventListener("DOMContentLoaded", function() {
101:          var listItems = document.querySelectorAll('#weight-units li');
102:          var button = document.querySelector("#weight-units-list-button > span")
103:          var weightUnitsList = document.getElementById('weight-units');
104:    
105:          function updateServingSize(element) {
106:              var buttonText = element.innerText.trim();
107:              button.innerText = buttonText;
108:              weightUnitsList.style.display = 'none';
109:          }
110:    
111:          button.addEventListener('click', function() {
112:              if (weightUnitsList.style.display === 'none' || weightUnitsList.style.display === '') {
113:                  weightUnitsList.style.display = 'block';
114:              } else {
115:                  weightUnitsList.style.display = 'none';
116:              }
117:          });
118:    
119:          listItems.forEach(function(item) {
120:              item.addEventListener('click', function() {
121:                  updateServingSize(this);
122:              });
123:          });
124:    
125:          document.body.addEventListener('click', function(event) {
126:              if (!event.target.closest('#weight-units-list-button') && !event.target.closest('#weight-units')) {
127:                  weightUnitsList.style.display = 'none';
128:              }
129:          });
130:      });
131:    
132:      function setRating(isThumbsUp) {
133:        const thumbsUpBtn = document.getElementById('thumbs-up-btn');
134:        const thumbsDownBtn = document.getElementById('thumbs-down-btn');
135:    
136:        thumbsUpBtn.classList.toggle('border', isThumbsUp);
137:        thumbsDownBtn.classList.toggle('border', !isThumbsUp);
138:    
139:        const ratingInput = document.createElement('input');
140:        ratingInput.type = 'hidden';
141:        ratingInput.name = 'review[rating]';
142:        ratingInput.value = isThumbsUp ? 'true' : 'false';
143:    
144:        const form = document.getElementById('review-form');
145:        const existingRatingInput = form.querySelector('input[name="review[rating]"]');
146:        if (existingRatingInput) {
147:          existingRatingInput.remove();
148:        }
149:    
150:        form.appendChild(ratingInput);
151:      }
152:    
153:      $('body').on('submit', '#review-form', function(event) {
154:        event.preventDefault();
155:        let form = $(this);
156:        let formData = new FormData(form[0]);
157:        formData.append('_token', $('meta[name="csrf-token"]').attr('content'));
158:    
159:        $.ajax({
160:          url: form.attr('action'),
161:          method: 'POST',
162:          data: formData,
163:          contentType: false,
164:          processData: false,
165:          success: function(response) {
166:            $('meta[name="csrf-token"]').attr('content', response.token);
167:    
168:            $('#review-text').val('');
169:            location.reload();
170:          },
171:          error: function(xhr, status, error) {
172:            console.log(error);
173:          }
174:        });
175:      });
  
app/views/user/products/show.html.haml:62: syntax error, unexpected '.'
app/views/user/products/show.html.haml:176: syntax error, unexpected end-of-input
E, [2024-02-27T14:43:01.388732 #78543] ERROR -- :   
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check .flex.flex-col.justify-center.items-center.h-full.w-full.overflow-auto
  .flex.flex-col.justify-center.items-center.place-self-center.w-full
    %h1.text-3xl.font-semibold.mt-10
      = "#{@product.name}"
    %h1.text-xl.font-semibold.mb-8
      = "(#{@product.brand} - #{@product.weight}g)"

  .flex.flex-row.justify-between.items-start{ class: "md:w-1/4 sm:w-full mb-8" }
    .flex.flex-col{ class: "w-1/2 px-4" }
      %label.mb-4
        = "Number of servings" 
      %input{type: "number", name: "servings", id: "servings", required: true, class: "rounded-lg p-2 w-full border border-slate-700 bg-slate-50", min: "0", value: "1"}
    .flex.flex-col{ class: "w-1/2 px-4" }
      %label#listbox-label
      = "Serving size"
      .relative.mt-4
        %button#weight-units-list-button.relative.w-full.cursor-default.rounded-lg.bg-white.pl-3.pr-10.text-left.text-gray-900.bg-slate-50.shadow-sm.ring-1.ring-inset.ring-slate-700.focus:outline-none.focus:ring-2.focus:ring-indigo-500.sm:text-sm.sm:leading-6{"aria-expanded" => "true", "aria-haspopup" => "listbox", "aria-labelledby" => "listbox-label", class: "py-2", type: "button"}
          %span.flex.items-center
            = @weight_units.find { |unit| unit.match?(/^100\s+\S+/) } # Regex sequence for finding any string starting with 100 + whitespace + characters
          %span.pointer-events-none.absolute.inset-y-0.right-0.ml-3.flex.items-center.pr-2
            = material_icon.shape('arrow_drop_down').md_24
        %ul#weight-units.absolute.z-10.mt-1.max-h-56.w-full.overflow-auto.rounded-lg.bg-slate-50.py-1.text-base.shadow-lg.ring-1.ring-black.ring-opacity-5.focus:outline-none.sm:text-sm{"aria-activedescendant" => "listbox-option-3", "aria-labelledby" => "listbox-label", role: "listbox", tabindex: "-1", style: "display: none;"}
          - @weight_units.each_with_index do |unit, index|
            %li{ id: "listbox-option-#{index}", class: "text-gray-900 relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-gray-200", role: "option" }
              .flex.items-center
                %span.font-normal.ml-3.block.truncate= unit

  %table.table-auto.border.border-slate-300{ class: "md:w-1/3 sm:w-full" }
    %tbody
      - @product.attributes.except('_id', 'brand', 'name', 'weight', 'weight_units', 'approved', 'created_at', 'updated_at').each_with_index do |(attribute, value), row_index|
        - humanized_attribute = attribute.humanize.split.map(&:capitalize).join(' ')
        - product_row_class = row_index.even? ? "bg-slate-50" : "bg-slate-100"
        %tr{ class: product_row_class}
          - if attribute == "allergens"
            %td{ class: "border border-slate-300 p-2 font-semibold w-1/3"}
              = "Allergens"
            %td{ class: "border border-slate-300 p-2 text-slate-700 w-2/3"}
              - allergen_names = value.map { |allergen_id| Allergen.find(allergen_id).name }
              = allergen_names.join(', ')
              %br/
          - elsif attribute == "submitted_by"
            %td{ class: "border border-slate-300 p-2 font-semibold"}
              = "Submitted by"
            %td{ class: "border border-slate-300 p-2 text-slate-700"}
              - user = User.find(value)
              = user.first_name
              %br/
          - else
            %td{ class: "border border-slate-300 p-2 font-semibold"}= humanized_attribute
            %td{ class: "border border-slate-300 p-2 text-slate-700"}= value.present? ? value : "0"

  .flex.flex-col.justify-start.items-start{ class: "md:w-1/3 sm:w-full h-full mt-10" }
    %h1.text-2xl.font-semibold.mb-4
      = "Reviews"

    %form#review-form{ action: "/products/#{@product.id}/reviews", method: 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
      = csrf_meta_tags 
      %label.mb-2
        = "Write a review for #{@product.name}"
      %textarea#review-text.bg-slate-50{ class: "w-full h-2/3 mb-2 rounded-lg", style: "resize: none;", name: "review[comment]" }
        - current_user_review = reviews.find_by(reviewer_id: current_user.id)
        = @current_user_review?.comment
      .flex.flex-row.items-center.justify-between.w-full.mt-4
        %label
          = "Do you recommend this product?"
        .flex#thumbs-buttons.flex-row.items-center.justify-start{ class: "w-1/2" }
          %button#thumbs-up-btn.mr-4.border-teal-700.rounded-lg{ class: @current_user_review.rating == true ? "border" : "", type: "button", onclick: "setRating(true)" }
            %span.p-1{ style: "color: 266aff; opacity: 0.85;" }
              = material_icon.shape('thumb_up').md_36
          %button#thumbs-down-btn.border-rose-500.rounded-lg{ class: @current_user_review.rating == false ? "border" : "", type: "button", onclick: "setRating(false)" }
            %span.p-1{ style: "color: ff2626; opacity: 0.85;" }
              = material_icon.shape('thumb_down').md_36
        %button{ type: "submit", class: "bg-primary-500 text-white rounded-lg p-2 px-4" }
          = "Submit"

    .flex.flex-col.items-start.w-full
      - if @reviews.present?
        - @reviews.each do |review|
          - next if review.comment.blank?
          - reviewer = User.find_by(id: review.reviewer_id)&.first_name
          .flex.flex-col.items-start.shadow-xl.rounded-lg.p-4.border-2.bg-slate-100.w-full{ class: "mb-4" }
            .flex.flex-row.justify-start.content-center.rounded-lg.p-2.border-2.mb-3.bg-gray-200{ class: "w-full" }
              - if review.rating
                %span.flex.items-center.mr-4{ style: "color: 266aff; opacity: 0.85;" }
                  = material_icon.shape('thumb_up').md_36
                %p.text-slate-800.text-lg.font-medium.mt-1
                  = "Recommended by #{reviewer}"
              - else
                %span.flex.items-center.mr-4{ style: "color: ff2626; opacity: 0.85;"}
                  = material_icon.shape('thumb_down').md_36
                %p.text-slate-800.text-lg.font-medium.mt-1
                  = "Not Recommended by #{reviewer}"
            %div.mb-4
              %p
                = review.comment
      - else
        %p No reviews available. You can help by adding a review.

:javascript
  document.addEventListener("DOMContentLoaded", function() {
      var listItems = document.querySelectorAll('#weight-units li');
      var button = document.querySelector("#weight-units-list-button > span")
      var weightUnitsList = document.getElementById('weight-units');

      function updateServingSize(element) {
          var buttonText = element.innerText.trim();
          button.innerText = buttonText;
          weightUnitsList.style.display = 'none';
      }

      button.addEventListener('click', function() {
          if (weightUnitsList.style.display === 'none' || weightUnitsList.style.display === '') {
              weightUnitsList.style.display = 'block';
          } else {
              weightUnitsList.style.display = 'none';
          }
      });

      listItems.forEach(function(item) {
          item.addEventListener('click', function() {
              updateServingSize(this);
          });
      });

      document.body.addEventListener('click', function(event) {
          if (!event.target.closest('#weight-units-list-button') && !event.target.closest('#weight-units')) {
              weightUnitsList.style.display = 'none';
          }
      });
  });

  function setRating(isThumbsUp) {
    const thumbsUpBtn = document.getElementById('thumbs-up-btn');
    const thumbsDownBtn = document.getElementById('thumbs-down-btn');

    thumbsUpBtn.classList.toggle('border', isThumbsUp);
    thumbsDownBtn.classList.toggle('border', !isThumbsUp);

    const ratingInput = document.createElement('input');
    ratingInput.type = 'hidden';
    ratingInput.name = 'review[rating]';
    ratingInput.value = isThumbsUp ? 'true' : 'false';

    const form = document.getElementById('review-form');
    const existingRatingInput = form.querySelector('input[name="review[rating]"]');
    if (existingRatingInput) {
      existingRatingInput.remove();
    }

    form.appendChild(ratingInput);
  }

  $('body').on('submit', '#review-form', function(event) {
    event.preventDefault();
    let form = $(this);
    let formData = new FormData(form[0]);
    formData.append('_token', $('meta[name="csrf-token"]').attr('content'));

    $.ajax({
      url: form.attr('action'),
      method: 'POST',
      data: formData,
      contentType: false,
      processData: false,
      success: function(response) {
        $('meta[name="csrf-token"]').attr('content', response.token);

        $('#review-text').val('');
        location.reload();
      },
      error: function(xhr, status, error) {
        console.log(error);
      }
    });
  });

):
1:    .flex.flex-col.justify-center.items-center.h-full.w-full.overflow-auto
2:      .flex.flex-col.justify-center.items-center.place-self-center.w-full
3:        %h1.text-3xl.font-semibold.mt-10
4:          = "#{@product.name}"
5:        %h1.text-xl.font-semibold.mb-8
6:          = "(#{@product.brand} - #{@product.weight}g)"
7:    
8:      .flex.flex-row.justify-between.items-start{ class: "md:w-1/4 sm:w-full mb-8" }
9:        .flex.flex-col{ class: "w-1/2 px-4" }
10:          %label.mb-4
11:            = "Number of servings" 
12:          %input{type: "number", name: "servings", id: "servings", required: true, class: "rounded-lg p-2 w-full border border-slate-700 bg-slate-50", min: "0", value: "1"}
13:        .flex.flex-col{ class: "w-1/2 px-4" }
14:          %label#listbox-label
15:          = "Serving size"
16:          .relative.mt-4
17:            %button#weight-units-list-button.relative.w-full.cursor-default.rounded-lg.bg-white.pl-3.pr-10.text-left.text-gray-900.bg-slate-50.shadow-sm.ring-1.ring-inset.ring-slate-700.focus:outline-none.focus:ring-2.focus:ring-indigo-500.sm:text-sm.sm:leading-6{"aria-expanded" => "true", "aria-haspopup" => "listbox", "aria-labelledby" => "listbox-label", class: "py-2", type: "button"}
18:              %span.flex.items-center
19:                = @weight_units.find { |unit| unit.match?(/^100\s+\S+/) } # Regex sequence for finding any string starting with 100 + whitespace + characters
20:              %span.pointer-events-none.absolute.inset-y-0.right-0.ml-3.flex.items-center.pr-2
21:                = material_icon.shape('arrow_drop_down').md_24
22:            %ul#weight-units.absolute.z-10.mt-1.max-h-56.w-full.overflow-auto.rounded-lg.bg-slate-50.py-1.text-base.shadow-lg.ring-1.ring-black.ring-opacity-5.focus:outline-none.sm:text-sm{"aria-activedescendant" => "listbox-option-3", "aria-labelledby" => "listbox-label", role: "listbox", tabindex: "-1", style: "display: none;"}
23:              - @weight_units.each_with_index do |unit, index|
24:                %li{ id: "listbox-option-#{index}", class: "text-gray-900 relative cursor-default select-none py-2 pl-3 pr-9 hover:bg-gray-200", role: "option" }
25:                  .flex.items-center
26:                    %span.font-normal.ml-3.block.truncate= unit
27:    
28:      %table.table-auto.border.border-slate-300{ class: "md:w-1/3 sm:w-full" }
29:        %tbody
30:          - @product.attributes.except('_id', 'brand', 'name', 'weight', 'weight_units', 'approved', 'created_at', 'updated_at').each_with_index do |(attribute, value), row_index|
31:            - humanized_attribute = attribute.humanize.split.map(&:capitalize).join(' ')
32:            - product_row_class = row_index.even? ? "bg-slate-50" : "bg-slate-100"
33:            %tr{ class: product_row_class}
34:              - if attribute == "allergens"
35:                %td{ class: "border border-slate-300 p-2 font-semibold w-1/3"}
36:                  = "Allergens"
37:                %td{ class: "border border-slate-300 p-2 text-slate-700 w-2/3"}
38:                  - allergen_names = value.map { |allergen_id| Allergen.find(allergen_id).name }
39:                  = allergen_names.join(', ')
40:                  %br/
41:              - elsif attribute == "submitted_by"
42:                %td{ class: "border border-slate-300 p-2 font-semibold"}
43:                  = "Submitted by"
44:                %td{ class: "border border-slate-300 p-2 text-slate-700"}
45:                  - user = User.find(value)
46:                  = user.first_name
47:                  %br/
48:              - else
49:                %td{ class: "border border-slate-300 p-2 font-semibold"}= humanized_attribute
50:                %td{ class: "border border-slate-300 p-2 text-slate-700"}= value.present? ? value : "0"
51:    
52:      .flex.flex-col.justify-start.items-start{ class: "md:w-1/3 sm:w-full h-full mt-10" }
53:        %h1.text-2xl.font-semibold.mb-4
54:          = "Reviews"
55:    
56:        %form#review-form{ action: "/products/#{@product.id}/reviews", method: 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
57:          = csrf_meta_tags 
58:          %label.mb-2
59:            = "Write a review for #{@product.name}"
60:          %textarea#review-text.bg-slate-50{ class: "w-full h-2/3 mb-2 rounded-lg", style: "resize: none;", name: "review[comment]" }
61:            - current_user_review = reviews.find_by(reviewer_id: current_user.id)
62:            = @current_user_review?.comment
63:          .flex.flex-row.items-center.justify-between.w-full.mt-4
64:            %label
65:              = "Do you recommend this product?"
66:            .flex#thumbs-buttons.flex-row.items-center.justify-start{ class: "w-1/2" }
67:              %button#thumbs-up-btn.mr-4.border-teal-700.rounded-lg{ class: @current_user_review.rating == true ? "border" : "", type: "button", onclick: "setRating(true)" }
68:                %span.p-1{ style: "color: 266aff; opacity: 0.85;" }
69:                  = material_icon.shape('thumb_up').md_36
70:              %button#thumbs-down-btn.border-rose-500.rounded-lg{ class: @current_user_review.rating == false ? "border" : "", type: "button", onclick: "setRating(false)" }
71:                %span.p-1{ style: "color: ff2626; opacity: 0.85;" }
72:                  = material_icon.shape('thumb_down').md_36
73:            %button{ type: "submit", class: "bg-primary-500 text-white rounded-lg p-2 px-4" }
74:              = "Submit"
75:    
76:        .flex.flex-col.items-start.w-full
77:          - if @reviews.present?
78:            - @reviews.each do |review|
79:              - next if review.comment.blank?
80:              - reviewer = User.find_by(id: review.reviewer_id)&.first_name
81:              .flex.flex-col.items-start.shadow-xl.rounded-lg.p-4.border-2.bg-slate-100.w-full{ class: "mb-4" }
82:                .flex.flex-row.justify-start.content-center.rounded-lg.p-2.border-2.mb-3.bg-gray-200{ class: "w-full" }
83:                  - if review.rating
84:                    %span.flex.items-center.mr-4{ style: "color: 266aff; opacity: 0.85;" }
85:                      = material_icon.shape('thumb_up').md_36
86:                    %p.text-slate-800.text-lg.font-medium.mt-1
87:                      = "Recommended by #{reviewer}"
88:                  - else
89:                    %span.flex.items-center.mr-4{ style: "color: ff2626; opacity: 0.85;"}
90:                      = material_icon.shape('thumb_down').md_36
91:                    %p.text-slate-800.text-lg.font-medium.mt-1
92:                      = "Not Recommended by #{reviewer}"
93:                %div.mb-4
94:                  %p
95:                    = review.comment
96:          - else
97:            %p No reviews available. You can help by adding a review.
98:    
99:    :javascript
100:      document.addEventListener("DOMContentLoaded", function() {
101:          var listItems = document.querySelectorAll('#weight-units li');
102:          var button = document.querySelector("#weight-units-list-button > span")
103:          var weightUnitsList = document.getElementById('weight-units');
104:    
105:          function updateServingSize(element) {
106:              var buttonText = element.innerText.trim();
107:              button.innerText = buttonText;
108:              weightUnitsList.style.display = 'none';
109:          }
110:    
111:          button.addEventListener('click', function() {
112:              if (weightUnitsList.style.display === 'none' || weightUnitsList.style.display === '') {
113:                  weightUnitsList.style.display = 'block';
114:              } else {
115:                  weightUnitsList.style.display = 'none';
116:              }
117:          });
118:    
119:          listItems.forEach(function(item) {
120:              item.addEventListener('click', function() {
121:                  updateServingSize(this);
122:              });
123:          });
124:    
125:          document.body.addEventListener('click', function(event) {
126:              if (!event.target.closest('#weight-units-list-button') && !event.target.closest('#weight-units')) {
127:                  weightUnitsList.style.display = 'none';
128:              }
129:          });
130:      });
131:    
132:      function setRating(isThumbsUp) {
133:        const thumbsUpBtn = document.getElementById('thumbs-up-btn');
134:        const thumbsDownBtn = document.getElementById('thumbs-down-btn');
135:    
136:        thumbsUpBtn.classList.toggle('border', isThumbsUp);
137:        thumbsDownBtn.classList.toggle('border', !isThumbsUp);
138:    
139:        const ratingInput = document.createElement('input');
140:        ratingInput.type = 'hidden';
141:        ratingInput.name = 'review[rating]';
142:        ratingInput.value = isThumbsUp ? 'true' : 'false';
143:    
144:        const form = document.getElementById('review-form');
145:        const existingRatingInput = form.querySelector('input[name="review[rating]"]');
146:        if (existingRatingInput) {
147:          existingRatingInput.remove();
148:        }
149:    
150:        form.appendChild(ratingInput);
151:      }
152:    
153:      $('body').on('submit', '#review-form', function(event) {
154:        event.preventDefault();
155:        let form = $(this);
156:        let formData = new FormData(form[0]);
157:        formData.append('_token', $('meta[name="csrf-token"]').attr('content'));
158:    
159:        $.ajax({
160:          url: form.attr('action'),
161:          method: 'POST',
162:          data: formData,
163:          contentType: false,
164:          processData: false,
165:          success: function(response) {
166:            $('meta[name="csrf-token"]').attr('content', response.token);
167:    
168:            $('#review-text').val('');
169:            location.reload();
170:          },
171:          error: function(xhr, status, error) {
172:            console.log(error);
173:          }
174:        });
175:      });
  
app/views/user/products/show.html.haml:62: syntax error, unexpected '.'
E, [2024-02-27T14:43:38.392622 #78543] ERROR -- :   
ActionView::Template::Error (undefined local variable or method `reviews' for #<ActionView::Base:0x00000000043238>):
    58:       %label.mb-2
    59:         = "Write a review for #{@product.name}"
    60:       %textarea#review-text.bg-slate-50{ class: "w-full h-2/3 mb-2 rounded-lg", style: "resize: none;", name: "review[comment]" }
    61:         - current_user_review = reviews.find_by(reviewer_id: current_user.id)
    62:         = current_user_review.comment
    63:       .flex.flex-row.items-center.justify-between.w-full.mt-4
    64:         %label
  
app/views/user/products/show.html.haml:61
E, [2024-02-27T14:43:51.700314 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `rating' for nil:NilClass):
    64:         %label
    65:           = "Do you recommend this product?"
    66:         .flex#thumbs-buttons.flex-row.items-center.justify-start{ class: "w-1/2" }
    67:           %button#thumbs-up-btn.mr-4.border-teal-700.rounded-lg{ class: @current_user_review.rating == true ? "border" : "", type: "button", onclick: "setRating(true)" }
    68:             %span.p-1{ style: "color: 266aff; opacity: 0.85;" }
    69:               = material_icon.shape('thumb_up').md_36
    70:           %button#thumbs-down-btn.border-rose-500.rounded-lg{ class: @current_user_review.rating == false ? "border" : "", type: "button", onclick: "setRating(false)" }
  
app/views/user/products/show.html.haml:67
E, [2024-02-27T14:47:21.022832 #78543] ERROR -- :   
ActionView::Template::Error (
message:
  Document not found for class Review with attributes {:reviewer_id=>BSON::ObjectId('65ddd9c820be1332cf978e77')}.
summary:
  When calling Review.find_by with a hash of attributes, all attributes provided must match a document in the database or this error will be raised.
resolution:
  Search for attributes that are in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause nil to be returned instead of raising this error.):
    58:       %label.mb-2
    59:         = "Write a review for #{@product.name}"
    60:       %textarea#review-text.bg-slate-50{ class: "w-full h-2/3 mb-2 rounded-lg", style: "resize: none;", name: "review[comment]" }
    61:         - current_user_review = @reviews.find_by(reviewer_id: current_user.id)
    62:         = current_user_review.comment
    63:       .flex.flex-row.items-center.justify-between.w-full.mt-4
    64:         %label
  
app/views/user/products/show.html.haml:61
E, [2024-02-27T15:09:19.709584 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:20.273925 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:23.368064 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:48.149012 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:54.062330 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:54.363585 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:54.532950 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:54.635234 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:09:54.765149 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:10:03.216197 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
W, [2024-02-27T15:11:01.381433 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: OpenSSL::SSL::SSLError: SSL_read: unexpected eof while reading (for 35.205.32.126:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, sconn:88364)
W, [2024-02-27T15:11:41.536437 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:12:31.603715 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:13:31.665749 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:14:21.763793 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017)
E, [2024-02-27T15:14:30.243814 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:14:50.693586 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
W, [2024-02-27T15:15:12.534916 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-00.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:16:53.012932 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, sconn:86558)
E, [2024-02-27T15:17:01.855833 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
W, [2024-02-27T15:17:03.206021 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:17:03.206280 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
E, [2024-02-27T15:17:13.460708 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:17:13.870274 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
W, [2024-02-27T15:17:23.323899 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:17:23.324747 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:17:43.462593 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:17:43.463337 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:18:03.605523 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:18:03.606112 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:18:23.725204 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:18:23.725778 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:18:43.851384 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:18:43.851764 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:19:03.980399 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:19:03.980983 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:19:24.102654 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:19:24.103297 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
E, [2024-02-27T15:19:52.673280 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
W, [2024-02-27T15:20:24.132797 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
E, [2024-02-27T15:20:36.145163 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [GET] "/product"):
  
E, [2024-02-27T15:20:59.684663 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
W, [2024-02-27T15:21:14.249286 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:22:04.326014 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:22:30.149109 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:22:30.149683 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:22:50.303561 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:22:50.304085 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.240.14.142:27017 (ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-02.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:23:54.966146 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, sconn:91193)
W, [2024-02-27T15:24:15.104547 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:24:15.105315 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
E, [2024-02-27T15:24:31.732757 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? * "#{@review.id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57
W, [2024-02-27T15:24:35.206777 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:24:35.207024 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:24:55.332642 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:24:55.333453 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:25:15.475343 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:25:15.475715 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
E, [2024-02-27T15:25:34.903929 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? * "#{@current_review.id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57
W, [2024-02-27T15:25:35.589507 #78543]  WARN -- : MONGODB | Failed to handshake with ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:25:35.591472 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:26:35.627357 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:27:25.715422 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
W, [2024-02-27T15:28:15.790425 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketError: Errno::ENETUNREACH: Network is unreachable - connect(2) for [2600:9000:5307:9300::1]:27017 (for 2600:9000:5307:9300::1:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017)
E, [2024-02-27T15:28:34.367576 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:28:42.675352 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
W, [2024-02-27T15:28:55.288913 #78543]  WARN -- : MONGODB | Error checking ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017: Mongo::Error::SocketTimeoutError: Errno::ETIMEDOUT: Connection timed out - Took more than 10 seconds to receive data (select call timed out) (for 35.195.194.177:27017 (ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, TLS)) (on ac-ltgynjt-shard-00-01.ywnthrv.mongodb.net:27017, sconn:208)
E, [2024-02-27T15:29:27.168735 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `_id' for nil:NilClass):
    52:   .flex.flex-col.justify-start.items-start{ class: "md:w-1/3 sm:w-full h-full mt-10" }
    53:     %h1.text-2xl.font-semibold.mb-4
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       - puts "/products/#{@product.id}/reviews/" + current_review.present? * "#{@current_review._id}"
    56:       = "Reviews"
    57: 
    58:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? * "#{@current_review._id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
  
app/views/user/products/show.html.haml:55
E, [2024-02-27T15:30:10.155063 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `_id' for nil:NilClass):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? * "#{@current_review._id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "/products/#{@product.id}/reviews/" + current_review.present? * "#{@current_review._id}"
  
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:30:29.081372 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `_id' for nil:NilClass):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? * "#{@current_review._id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:30:44.378265 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? * "#{@current_review.id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:33:55.970998 #78543] ERROR -- :   
ActionView::Template::Error (no implicit conversion of true into String):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? ? "#{@current_review.id}" : "", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57:in `+'
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:34:19.556111 #78543] ERROR -- :   
ActionView::Template::Error (no implicit conversion of true into String):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + (current_review.present?) ? "#{@current_review.id}" : "", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57:in `+'
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:34:24.692113 #78543] ERROR -- :   
ActionView::Template::Error (no implicit conversion of true into String):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + (current_review.present?) ? "#{@current_review.id}" : "", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57:in `+'
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:34:50.673650 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + ((current_review.present?) ? "#{@current_review.id}" : ""), method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:35:21.328872 #78543] ERROR -- :   
ActionView::Template::Error (no implicit conversion of true into String):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + current_review.present? == true ? "#{@current_review.id}" : "", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57:in `+'
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:35:58.935381 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    54:       - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    55:       = "Reviews"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + "#{@current_review.id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
    59:       %label.mb-2
    60:         = "Write a review for #{@product.name}"
  
app/views/user/products/show.html.haml:57
E, [2024-02-27T15:37:22.849306 #78543] ERROR -- :   
ActionController::RoutingError (No route matches [PUT] "/products/65d25943c2ef35ebebb785e4/reviews"):
  
E, [2024-02-27T15:41:10.754765 #78543] ERROR -- :   
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    52:   .flex.flex-col.justify-start.items-start{ class: "md:w-1/3 sm:w-full h-full mt-10" }
    53:     - current_review = @reviews.find_by(reviewer_id: current_user.id) rescue nil
    54:     %h1.text-2xl.font-semibold.mb-4
    55:       = "Reviews" + "#{@current_review.id}"
    56: 
    57:     %form#review-form{ action: "/products/#{@product.id}/reviews/" + "#{@current_review&.id}", method: current_review.present? ? 'put' : 'post', class: "flex flex-col items-start shadow-xl rounded-lg p-4 border-2 bg-slate-100 w-full h-[20rem] mb-10" }
    58:       = csrf_meta_tags 
  
app/views/user/products/show.html.haml:55
E, [2024-02-27T15:49:02.482573 #78543] ERROR -- :   
AbstractController::ActionNotFound (The edit action could not be found for the :set_review
callback on User::ReviewsController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:62:in `match?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:426:in `block in make_lambda'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block (2 levels) in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `all?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
turbo-rails (2.0.4) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.4) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.3.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
mongoid (8.1.4) lib/mongoid/railties/controller_runtime.rb:21:in `process_action'
actionpack (7.1.3.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.3.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.3.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.3.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:21:in `block in <class:Constraints>'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:51:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.9.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.9.1) lib/rack/etag.rb:29:in `call'
rack (3.0.9.1) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.9.1) lib/rack/head.rb:15:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.9.1) lib/rack/method_override.rb:28:in `call'
rack (3.0.9.1) lib/rack/runtime.rb:24:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.9.1) lib/rack/sendfile.rb:114:in `call'
railties (7.1.3.2) lib/rails/engine.rb:536:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
W, [2024-02-27T20:52:00.032852 #4718]  WARN -- : The BSON Symbol type is deprecated by MongoDB. Please use String or StringifiedSymbol field types instead of the Symbol field type.
E, [2024-02-27T20:56:13.120458 #4718] ERROR -- :   
AbstractController::ActionNotFound (The edit action could not be found for the :set_review
callback on User::ReviewsController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:62:in `match?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:426:in `block in make_lambda'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block (2 levels) in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `all?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
turbo-rails (2.0.4) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.4) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.3.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
mongoid (8.1.4) lib/mongoid/railties/controller_runtime.rb:21:in `process_action'
actionpack (7.1.3.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.3.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.3.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.3.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:21:in `block in <class:Constraints>'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:51:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.9.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.9.1) lib/rack/etag.rb:29:in `call'
rack (3.0.9.1) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.9.1) lib/rack/head.rb:15:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.9.1) lib/rack/method_override.rb:28:in `call'
rack (3.0.9.1) lib/rack/runtime.rb:24:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.9.1) lib/rack/sendfile.rb:114:in `call'
railties (7.1.3.2) lib/rails/engine.rb:536:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
E, [2024-02-27T21:00:33.240795 #4718] ERROR -- :   
AbstractController::ActionNotFound (The destroy action could not be found for the :set_review
callback on User::ReviewsController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:62:in `match?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:426:in `block in make_lambda'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block (2 levels) in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `all?'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:182:in `block in halting_and_conditional'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `block in invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `each'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:598:in `invoke_before'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
turbo-rails (2.0.4) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.4) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.3.2) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.3.2) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.3.2) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.3.2) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.3.2) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
mongoid (8.1.4) lib/mongoid/railties/controller_runtime.rb:21:in `process_action'
actionpack (7.1.3.2) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.3.2) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.3.2) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.3.2) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:21:in `block in <class:Constraints>'
actionpack (7.1.3.2) lib/action_dispatch/routing/mapper.rb:51:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.3.2) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.3.2) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.0.9.1) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.0.9.1) lib/rack/etag.rb:29:in `call'
rack (3.0.9.1) lib/rack/conditional_get.rb:43:in `call'
rack (3.0.9.1) lib/rack/head.rb:15:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.3.2) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/cookies.rb:689:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.3.2) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.3.2) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.3.2) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.3.2) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.0.9.1) lib/rack/method_override.rb:28:in `call'
rack (3.0.9.1) lib/rack/runtime.rb:24:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.3.2) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.2) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.0.9.1) lib/rack/sendfile.rb:114:in `call'
railties (7.1.3.2) lib/rails/engine.rb:536:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
E, [2024-02-27T21:01:28.825321 #4718] ERROR -- :   
NameError (undefined local variable or method `review' for #<User::ReviewsController:0x00000000012c50>):
  
app/controllers/user/reviews_controller.rb:31:in `block in update'
app/controllers/user/reviews_controller.rb:30:in `update'
E, [2024-02-27T21:03:47.750619 #4718] ERROR -- :   
NameError (undefined local variable or method `review' for #<User::ReviewsController:0x000000000163c8>):
  
app/controllers/user/reviews_controller.rb:31:in `block in update'
app/controllers/user/reviews_controller.rb:30:in `update'
E, [2024-02-27T21:04:55.062915 #4718] ERROR -- :   
NoMethodError (undefined method `product_url' for #<User::ReviewsController:0x0000000001bdf0>):
  
app/controllers/user/reviews_controller.rb:33:in `block (2 levels) in update'
app/controllers/user/reviews_controller.rb:30:in `update'
E, [2024-02-27T21:06:57.028036 #4718] ERROR -- :   
Mongoid::Errors::DocumentNotFound (
message:
  Document(s) not found for class Product with id(s) 65db5f93d831830c292cff21.
summary:
  When calling Product.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 65db5f93d831830c292cff21 ... (1 total) and the following ids were not found: 65db5f93d831830c292cff21.
resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  
app/controllers/user/products_controller.rb:64:in `set_product'
E, [2024-02-27T21:15:09.500910 #4718] ERROR -- :   
Mongoid::Errors::DocumentNotFound (
message:
  Document(s) not found for class Product with id(s) 65db5f93d831830c292cff21.
summary:
  When calling Product.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 65db5f93d831830c292cff21 ... (1 total) and the following ids were not found: 65db5f93d831830c292cff21.
resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  
app/controllers/user/products_controller.rb:64:in `set_product'
E, [2024-02-27T21:15:19.828875 #4718] ERROR -- :   
Mongoid::Errors::DocumentNotFound (
message:
  Document(s) not found for class Product with id(s) 65db5f93d831830c292cff21.
summary:
  When calling Product.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 65db5f93d831830c292cff21 ... (1 total) and the following ids were not found: 65db5f93d831830c292cff21.
resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  
app/controllers/user/products_controller.rb:64:in `set_product'
E, [2024-02-27T21:17:34.387423 #4718] ERROR -- :   
Mongoid::Errors::DocumentNotFound (
message:
  Document(s) not found for class Product with id(s) 65db5f93d831830c292cff21.
summary:
  When calling Product.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 65db5f93d831830c292cff21 ... (1 total) and the following ids were not found: 65db5f93d831830c292cff21.
resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  
app/controllers/user/products_controller.rb:64:in `set_product'
E, [2024-02-27T21:17:39.336723 #4718] ERROR -- :   
Mongoid::Errors::DocumentNotFound (
message:
  Document(s) not found for class Product with id(s) 65db5f93d831830c292cff21.
summary:
  When calling Product.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 65db5f93d831830c292cff21 ... (1 total) and the following ids were not found: 65db5f93d831830c292cff21.
resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  
app/controllers/user/products_controller.rb:64:in `set_product'
E, [2024-02-27T21:18:04.064146 #4718] ERROR -- :   
Mongoid::Errors::DocumentNotFound (
message:
  Document(s) not found for class Product with id(s) 65db5f93d831830c292cff21.
summary:
  When calling Product.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 65db5f93d831830c292cff21 ... (1 total) and the following ids were not found: 65db5f93d831830c292cff21.
resolution:
  Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.):
  
app/controllers/user/products_controller.rb:64:in `set_product'
